<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Book</title>
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
</head>
<style>
    .bg-color {
        background-color: #f1f3eeca;
    }
</style>

<body class="bg-color pt-3">

    <main class="container py-5">


        <section class="mb-5">
            <div class="card shadow-sm border-0 rounded-4 p-4 p-md-5 mx-auto" style="max-width: 850px;">

                <h3 class="text-center mb-4 fw-bold">Add New Book</h3>

                <form action="/books" method="post">


                    <div class="row g-3 mb-3">
                        <div class="col-md-6">
                            <label class="form-label fw-semibold">Book Name</label>
                            <input type="text" name="bookName" class="form-control form-control-lg" required />
                        </div>

                        <div class="col-md-6">
                            <label class="form-label fw-semibold">Author</label>
                            <input type="text" name="author" class="form-control form-control-lg" required />
                        </div>
                    </div>


                    <div class="row g-3 mb-3">
                        <div class="col-md-4">
                            <label class="form-label fw-semibold">Price</label>
                            <input type="number" name="price" class="form-control form-control-lg" required />
                        </div>

                        <div class="col-md-4">
                            <label class="form-label fw-semibold">Date</label>
                            <input type="date" name="Date" class="form-control form-control-lg" required />
                        </div>

                        <div class="col-md-4">
                            <label class="form-label fw-semibold">Genre</label>
                            <select name="genre" class="form-select form-select-lg" required >
                                <option>Select Genre</option>
                                <option>Science</option>
                                <option>Comics</option>
                                <option>Historic</option>
                                <option>Classic</option>
                                <option>Romance</option>
                                <option>Thriller</option>
                                <option>Motivation</option>
                            </select>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="form-label fw-semibold">Format</label>

                        <div class="d-flex gap-4 mt-2">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="format" value="Paperback" required>
                                <label class="form-check-label">Paperback</label>
                            </div>

                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="format" value="E-book" required>
                                <label class="form-check-label">E-book</label>
                            </div>
                        </div>
                    </div>


                    <div class="mb-3 d-flex gap-3 ">
                        <button class="btn btn-outline-dark rounded px-4">
                            Submit
                        </button>

                        <a href="/" class="btn btn-outline-dark rounded px-4">
                            ‚Üê Back to Home
                        </a>
                    </div>

                </form>
            </div>
        </section>

        <section>
            <h3 class="fw-bold mb-3">All Books</h3>

            <div class="card shadow-sm border-0 rounded-4">
                <div class="table-responsive">
                    <table class="table table-hover align-middle text-center mb-0">

                        <thead class="bg-dark text-white">
                            <tr>
                                <th>No</th>
                                <th>Book Name</th>
                                <th>Author</th>
                                <th>Price</th>
                                <th>Date</th>
                                <th>Genre</th>
                                <th>Format</th>
                                <th>Action</th>
                            </tr>
                        </thead>

                        <tbody>
                            <% if (books.length===0) { %>
                                <tr>
                                    <td colspan="9" class="py-5 text-muted fw-semibold">
                                        <div class="d-flex flex-column align-items-center">
                                            <div class="display-6 opacity-50">üìö</div>
                                            No books found.
                                        </div>
                                    </td>
                                </tr>

                                <% } else { %>
                                    <% books.map((book, idx)=> { %>
                                        <tr>
                                            <td>
                                                <%= idx + 1 %>
                                            </td>
                                            <td>
                                                <%= book.bookName %>
                                            </td>
                                            <td>
                                                <%= book.author %>
                                            </td>
                                            <td>‚Çπ <%= book.price %>
                                            </td>
                                            <td>
                                                <%= book.Date %>
                                            </td>
                                            <td>
                                                <%= book.genre %>
                                            </td>
                                            <td>
                                                <%= book.format %>
                                            </td>

                                            <td class="d-flex justify-content-center gap-2">
                                                <a href="/edit-book/<%= book._id %>"
                                                    class="btn btn-primary btn-sm rounded-pill px-3">
                                                    Edit
                                                </a>

                                                <button onclick="deleteBook('<%= book._id %>')"
                                                    class="btn btn-danger btn-sm rounded-pill px-3">
                                                    Delete
                                                </button>
                                            </td>
                                        </tr>
                                 <% }) %>
                             <% } %>
                        </tbody>

                    </table>
                </div>
            </div>
        </section>

    </main>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        const deleteBook = (id) => {
            Swal.fire({
                title: "Are you sure?",
                text: "You won't be able to revert this!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Yes, delete it!"
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = `/delete-book/${id}`
                }
            });
        }
    </script>

</body>

</html>